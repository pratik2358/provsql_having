\section{Implementation}
\begin{algorithm}
  \caption{DP algorithm for $[\mathdutchcal{u}\oslash C]_{\mathrm{op}}$ (covers $=,>,<,\ge,\le$)}
  \begin{algorithmic}[1]
    \REQUIRE a dictionary $A \leftarrow \mathrm{supp}(\mathdutchcal{u})$, a constant $C \in M$, and an operator $\mathrm{op}\in\{=,>,<,\ge,\le\}$
    \ENSURE a list $\mathcal{R}$ of subsets of $A$, s.t.\ $\forall R \in \mathcal{R}$, $\ \sum_{\mathbf{x}\in R}\mathbf{x}^{(M)}\ \mathrm{op}\ C$

    \IF{$\mathrm{op}\in\{>,\ge\}$}
      \STATE $T \gets \sum_{\mathbf{x}\in A}\mathbf{x}^{(M)}$ \COMMENT{max possible sum}
      \STATE $J \gets T$
    \ELSIF{$\mathrm{op}=<$}
      \STATE $J \gets C-1$
    \ELSE
      \STATE $J \gets C$ \COMMENT{$\mathrm{op}\in\{=,\le\}$}
    \ENDIF

    \STATE Initialize $dp[0] \leftarrow \{\emptyset\}$
    \FOR{$j \gets 1$ \TO $J$}
      \STATE $dp[j] \leftarrow \emptyset$
    \ENDFOR

    \FOR{$i \gets 1$ \TO $|A|$}
      \STATE $w \gets A^{(M)}[i]$, $g \gets A^{(K)}[i]$
      \FOR{$j \gets J, J-1, \dots, w$}
        \STATE $p \gets j - w$
        \IF{$dp[p] \neq \emptyset$}
          \FORALL{$S \in dp[p]$}
            \STATE append $S \cup \{g\}$ to $dp[j]$
          \ENDFOR
        \ENDIF
      \ENDFOR
    \ENDFOR

    \IF{$\mathrm{op} = =$}
      \STATE $\mathcal{R} \leftarrow dp[C]$
    \ELSIF{$\mathrm{op} = >$}
      \STATE $\mathcal{R} \leftarrow \bigcup_{j=C+1}^{J} dp[j]$
    \ELSIF{$\mathrm{op} = <$}
      \STATE $\mathcal{R} \leftarrow \bigcup_{j=1}^{C-1} dp[j]$
    \ELSIF{$\mathrm{op} = \ge$}
      \STATE $\mathcal{R} \leftarrow \bigcup_{j=C}^{J} dp[j]$
    \ELSE % \mathrm{op}=\le
      \STATE $\mathcal{R} \leftarrow \bigcup_{j=1}^{C} dp[j]$
    \ENDIF

    \STATE \RETURN $\mathcal{R}$
  \end{algorithmic}
\end{algorithm}


\begin{algorithm}
  \caption{Probability computation for $[\mathdutchcal{u}\oslash C]_{\mathrm{op}}$}
  \begin{algorithmic}[1]
    \REQUIRE dictionary $A\leftarrow\mathrm{supp}(\mathdutchcal{u})$, constant $C\in M$, operator $\mathrm{op}$, and probabilities $p(g)$ for all $g\in\mathcal{G}$
    \ENSURE $\Pr\big([\mathdutchcal{u}\oslash C]_{\mathrm{op}}\big)$
    \STATE $\mathcal{R} \gets \textsc{DP-Subsets}(A,C,\mathrm{op})$ \COMMENT{Algorithm above}
    \STATE $P \gets 0$
    \FORALL{$S \in \mathcal{R}$}
      \STATE $\pi \gets 1$
      \FORALL{$g \in \mathcal{G}$}
        \IF{$g \in S$}
          \STATE $\pi \gets \pi \cdot p(g)$
        \ELSE
          \STATE $\pi \gets \pi \cdot (1 - p(g))$
        \ENDIF
      \ENDFOR
      \STATE $P \gets P + \pi$
    \ENDFOR
    \STATE \RETURN $P$
  \end{algorithmic}
\end{algorithm}

% \begin{table}[hbt]
%   \centering
%   \begin{tabular}{cc}
%     \toprule
%     operator & $\mathcal{R}$\\
%     \midrule
%     $=$ & $dp[C]$\\
%     $>$ & $\bigcup_{j=C+1}^{T} dp[j]$\\
%     $<$ & $\bigcup_{j=1}^{C-1} dp[j]$\\
%     $\geq$ & $\bigcup_{j=C}^{T} dp[j]$\\
%     $\leq$ & $\bigcup_{j=1}^{C} dp[j]$\\
%     \bottomrule
%   \end{tabular}
% \end{table}
